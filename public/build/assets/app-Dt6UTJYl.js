import"./slider-B5j_Jlul.js";let o=JSON.parse(localStorage.getItem("cart"))||[];const T=document.querySelectorAll(".cart-count"),b=document.getElementById("cart-aside"),g=document.getElementById("cart-overlay"),l=document.getElementById("cart-aside-items"),k=document.getElementById("cart-aside-total"),x=document.getElementById("empty-cart-aside-message"),s=document.getElementById("menu-toggle"),d=document.getElementById("mobile-menu"),m=document.querySelectorAll(".main");let i=0;function f(){localStorage.setItem("cart",JSON.stringify(o))}function p(){const t=o.reduce((e,a)=>e+a.quantity,0);T.forEach(e=>e.textContent=t)}function y(t,e="info"){let a="";e==="success"?a="linear-gradient(to right, #28a745, #218838)":e==="error"?a="linear-gradient(to right, #dc3545, #c82333)":a="linear-gradient(to right, #007bff, #0056b3)";const n=document.createElement("span");n.innerHTML=t,Toastify({node:n,duration:3e3,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:a,borderRadius:"5px",fontSize:"1rem",padding:"12px 20px",maxWidth:"300px",display:"flex"},onClick:function(){}}).showToast()}function c(){l.innerHTML="";let t=0;o.length===0?x.classList.remove("hidden"):(x.classList.add("hidden"),o.forEach(e=>{const a=e.price*e.quantity;t+=a;const n=`
                <li class="flex p-6 justify-between  items-center py-4 gap-5 w-full">
                    <div class='flex items-center gap-2'>
                        <img src="${e.image}" alt="${e.name}" class="w-16 h-16 object-cover rounded-md mr-4">
                        <div class="">
                            <h3 class="text-md text-gray-800 text-md line-clamp-2">${e.name}</h3>
                            <div class="inline-flex items-center space-x-2 border border-gray-400 ">
                                <button class="hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 text-sm transition-all-ease" data-product-id="${e.id}" data-change="-1">-</button>
                                <span class="text-md ">${e.quantity}</span>
                                <button class="hover:bg-gray-300 text-gray-800 font-bold py-1 px-2 text-sm transition-all-ease" data-product-id="${e.id}" data-change="1">+</button>
                            </div>
                            <p class="text-gray-600 text-sm">${a.toFixed(2)} JOD</p>
                        </div>
                    </div>
                    <div class="text-center self-start pt-1">
                        <button class="text-red-500 hover:text-red-700 transition-all-ease" data-remove-id="${e.id}">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </li>
            `;l.innerHTML+=n})),k.textContent=`${t.toFixed(2)} JOD`,A()}function A(){l.querySelectorAll("[data-product-id]").forEach(t=>{t.removeEventListener("click",r),t.addEventListener("click",r)}),l.querySelectorAll("[data-remove-id]").forEach(t=>{t.removeEventListener("click",r),t.addEventListener("click",r)})}function r(t){const e=t.currentTarget,a=e.dataset.productId||e.dataset.removeId;if(a)if(e.dataset.change){const n=parseInt(e.dataset.change);E(parseInt(a),n)}else e.dataset.removeId&&h(parseInt(a))}function $(t,e,a,n){const v=o.find(I=>I.id===t);v?v.quantity++:o.push({id:t,name:e,price:a,image:n,quantity:1}),f(),y(`<span class='font-bold'>${e}</span> added to cart!`,"success"),p(),c()}function h(t){o=o.filter(e=>e.id!==t),f(),p(),c(),window.location.pathname.includes("/cart")&&window.location.reload(),y("Item removed from cart.","info")}function E(t,e){const a=o.find(n=>n.id===t);a&&(a.quantity+=e,a.quantity<=0?h(t):(f(),c())),window.location.pathname.includes("/cart")&&window.location.reload()}function C(){b.classList.add("is-open"),g.classList.add("is-open"),i=window.scrollY,document.body.classList.add("no-scroll-fixed"),document.body.style.top=`-${i}px`,c()}function u(){b.classList.remove("is-open"),g.classList.remove("is-open"),document.body.classList.remove("no-scroll-fixed"),document.body.style.top="",window.scrollTo(0,i)}function w(){s.checked?(i=window.scrollY,document.body.classList.add("no-scroll-fixed"),document.body.style.top=`-${i}px`):setTimeout(()=>{document.body.classList.remove("no-scroll-fixed"),document.body.style.top="",window.scrollTo(0,i)},300)}document.addEventListener("DOMContentLoaded",()=>{s&&s.addEventListener("change",w),s&&d&&m.length>0&&(s.addEventListener("change",function(){m.forEach(t=>t.classList.toggle("translate-x-60",this.checked)),d.classList.toggle("-translate-x-[100%]",!this.checked)}),document.body.addEventListener("click",t=>{s.checked&&!d.contains(t.target)&&!s.contains(t.target)&&!document.getElementById("nav-icon").contains(t.target)&&(s.checked=!1,m.forEach(e=>e.classList.remove("translate-x-60")),d.classList.add("-translate-x-[100%]"),w())})),document.addEventListener("click",t=>{t.target.closest("[data-open-cart-aside]")&&C(),t.target.closest("[data-close-cart-aside]")&&u(),t.target===g&&u()}),p(),c()});window.addToCart=$;window.removeFromCart=h;window.updateQuantity=E;window.showCartAside=C;window.hideCartAside=u;window.showMessageBox=y;window.cart=o;let L;document.addEventListener("scroll",()=>{document.documentElement.classList.add("scrolling"),clearTimeout(L),L=setTimeout(()=>{document.documentElement.classList.remove("scrolling")},300)},{passive:!0,capture:!0});
