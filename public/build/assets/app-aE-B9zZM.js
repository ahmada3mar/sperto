import"./slider-B5j_Jlul.js";let n=JSON.parse(localStorage.getItem("cart"))||[];const C=document.querySelectorAll(".cart-count"),b=document.getElementById("cart-aside"),m=document.getElementById("cart-overlay"),p=document.getElementById("cart-aside-items"),T=document.getElementById("cart-aside-total"),x=document.getElementById("empty-cart-aside-message"),i=document.getElementById("menu-toggle"),d=document.getElementById("mobile-menu"),l=document.querySelectorAll(".main");let a=0;function g(){localStorage.setItem("cart",JSON.stringify(n)),document.dispatchEvent(new CustomEvent("cartUpdated"))}function r(){const e=n.reduce((t,o)=>t+o.quantity,0);C.forEach(t=>t.textContent=e)}function f(e,t="info"){let o="";t==="success"?o="linear-gradient(to right, #4CAF50, #4CAF50)":t==="error"?o="linear-gradient(to right, #EF4444, #DC2626)":o="linear-gradient(to right, #F59E0B, #D97706)";const s=document.createElement("span");s.innerHTML=e,Toastify({node:s,duration:3e3,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:o,borderRadius:"5px",fontSize:"1rem",padding:"12px 20px",maxWidth:"300px",display:"flex"},onClick:function(){}}).showToast()}function c(){p.innerHTML="";let e=0;n.length===0?x.classList.remove("hidden"):(x.classList.add("hidden"),n.forEach(t=>{const o=t.price*t.quantity;e+=o;const s=`
                <li class="flex p-6 justify-between  items-center py-4 gap-5 w-full">
                    <div class='flex items-center gap-2'>
                        <img src="${t.image}" alt="${t.name}" class="w-16 h-16 object-cover rounded-md mr-4">
                        <div class="flex flex-col gap-2">
                            <h3 class="text-md text-gray-800 text-md line-clamp-2">${t.name}</h3>
                            <div class="flex gap-1 items-center" >
                                <div class="inline-flex h-8 items-center space-x-2 border border-gray-300 rounded-md">
                                    <button class="hover:bg-gray-100 text-gray-700 font-bold py-1 px-3 text-sm transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-l-md" onclick="updateQuantity(${t.id}, -1)">-</button>
                                    <span class="text-md  text-gray-900 px-2">${t.quantity}</span>
                                    <button class="hover:bg-gray-100 text-gray-700 font-bold py-1 px-3 text-sm transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-r-md" onclick="updateQuantity(${t.id}, 1)">+</button>
                                </div>
                                <div class="h-8 justify-center flex items-center border border-gray-300 rounded-md overflow-hidden">
                                    <button class="text-red-500 w-8 h-full flex items-center justify-center hover:bg-red-50 hover:text-red-700 transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50" onclick="removeFromCart(${t.id})">
                                        <i class="fas fa-times text-lg"></i>
                                    </button>
                                </div>
                            </div>
                            <p class="text-gray-600 text-sm">${o.toFixed(2)} JOD</p>
                        </div>
                    </div>
                </li>
            `;p.innerHTML+=s})),T.textContent=`${e.toFixed(2)} JOD`}function k(e,t,o,s){const y=n.find(L=>L.id===e);y?y.quantity++:n.push({id:e,name:t,price:o,image:s,quantity:1}),g(),f(`<span class='font-bold'>${t}</span> added to cart!`,"success"),r(),c()}function w(e){n=n.filter(t=>t.id!==e),g(),r(),c(),f("Item removed from cart.","info")}function A(e,t){const o=n.find(s=>s.id===e);o&&(o.quantity+=t,o.quantity<=0?w(e):(g(),c()),r())}function E(){b.classList.add("is-open"),m.classList.add("is-open"),a=window.scrollY,document.body.classList.add("no-scroll-fixed"),document.body.style.top=`-${a}px`,c()}function u(){b.classList.remove("is-open"),m.classList.remove("is-open"),document.body.classList.remove("no-scroll-fixed"),document.body.style.top="",window.scrollTo(0,a)}function h(){i.checked?(a=window.scrollY,document.body.classList.add("no-scroll-fixed"),document.body.style.top=`-${a}px`):setTimeout(()=>{document.body.classList.remove("no-scroll-fixed"),document.body.style.top="",window.scrollTo(0,a)},300)}document.addEventListener("DOMContentLoaded",()=>{i&&i.addEventListener("change",h),i&&d&&l.length>0&&(i.addEventListener("change",function(){l.forEach(e=>e.classList.toggle("translate-x-60",this.checked)),d.classList.toggle("-translate-x-[100%]",!this.checked)}),document.body.addEventListener("click",e=>{i.checked&&!d.contains(e.target)&&!i.contains(e.target)&&!document.getElementById("nav-icon").contains(e.target)&&(i.checked=!1,l.forEach(t=>t.classList.remove("translate-x-60")),d.classList.add("-translate-x-[100%]"),h())})),document.addEventListener("click",e=>{e.target.closest("[data-open-cart-aside]")&&E(),e.target.closest("[data-close-cart-aside]")&&u(),e.target===m&&u()}),r(),c()});window.addToCart=k;window.removeFromCart=w;window.updateQuantity=A;window.showCartAside=E;window.hideCartAside=u;window.showMessageBox=f;window.cart=n;let v;document.addEventListener("scroll",()=>{document.documentElement.classList.add("scrolling"),clearTimeout(v),v=setTimeout(()=>{document.documentElement.classList.remove("scrolling")},300)},{passive:!0,capture:!0});
